<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org/">

<head>
    <meta charset="utf-8"/>
    <title>java</title>
    <link rel="stylesheet" type="text/css" href="/static/css/style.css" th:href="@{/css/style.css}"/>

    <script language="JavaScript">
        function addToCart(id){
            var element = document.getElementById("allNum")
            var num=element.innerText
            if(confirm("是否添加到购物车？")){
                window.location.href="/addToCart?id="+id+"&number="+num;
            }
        }

        function plusNum(){
            var element = document.getElementById("allNum")
            var num=Number(element.innerText)
            if(num==0){
                alert("已经达到最小了")
            }else {
                num=num-1;
            }
            element.innerText = num
        }

        function addNum(){
            var element = document.getElementById("allNum")
            var num=Number(element.innerText)
            num=num+1;
            element.innerText = num
        }
    </script>
</head>

<body>

<div th:include="header::common_header"></div>

<div class="main">
    <div class="top">
        <div class="base" ><img src="./im/test.jpg" th:src="${commodity.imageUrl}"></div>
        <div class="cnt">
            <h2 th:text="${commodity.title}">Java编程思想（第4版</h2>
            <p class="summary" th:text="${commodity.summary}">2222</p>
            <div class="price">
                <span>¥</span><span th:text="${commodity.price}">1000</span>

            </div>
            <div class="num">购买数量：
                <span id="plusNum" class="lessNum" onclick="plusNum()" th:onclick="plusNum()">
                <a>-</a>&nbsp&nbsp
                </span>
                <span class="totalNum" id="allNum">
                    1
                </span>&nbsp&nbsp
                <span id="addNum" class="moreNum" onclick="addNum()" th:onclick="addNum()">
                <a>+</a>&nbsp
                </span>
            </div>

            <div th:if="${#strings.equals(session.user, 'seller')}">
                <a th:href="@{/edit/{id}(id=${commodity.id})}">编 辑</a>
            </div>

            <div th:if="${#strings.equals(session.user, 'buyer')} and ${not #strings.isEmpty(buyPrice)}" th:text="|购买时价格¥${buyPrice}|">
                ¥10
            </div>

            <div th:if="${#strings.equals(session.user, 'buyer')}" style="float: left" th:style="'float: left'">
                <button th:onclick="addToCart([[${commodity.id}]])" onclick="addToCart(1)" th:disabled="${commodity.sellNum>0}">添加到购物车</button>
            </div>&nbsp&nbsp





            <div class="oprt f-cb">
            </div>
        </div>
    </div>

    <div>
        <h2>详细信息</h2>
    </div>
    <hr>
    <div th:text="${commodity.detail}">
        hello, world !
    </div>
</div>

</body>
</html>